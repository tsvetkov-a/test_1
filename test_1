
  procedure test_1(o_id number) is
  begin
    for change in (
    select executor, xmlelement("TABLE", xmlforest(
             xmlforest('{ord_no}' as "TD", o.no as "TD") as "TR"
           , xmlforest('{cancel_date}' as "TD", o.cancel_date as "TD") as "TR"
           )) x
     from ppo_orders o join ppo_voldates w on w.ord_id = o.id
     where w.kind = '1127'
     and o.done_doc_date is null
     and upper(o.no) not like '%test%'
     and upper(o.no) not like '%тест%'
     and o.id = o_id
     and rownum = 1
      ) loop
        if executor = 129376 then
            ref_mail.send('Заказ аннулирован (УГП №1)', change.x);
        elsif executor = 1293890 then
            ref_mail.send('Заказ аннулирован (УГП №2)', change.x);
        end if;
       end loop;      
  end test_1;
  
  Error(2247,9): PL/SQL: Statement ignored
  Error(2247,12): PLS-00201: identifier 'EXECUTOR' must be declared
