  procedure test_1(o.id number) is
  begin
    for change in (
    select xmlelement("TABLE", xmlforest(
             xmlforest('{ord_no}' as "TD", o.no as "TD") as "TR"
           , xmlforest('{canlec_date}' as "TD", o.cancel_date as "TD") as "TR"
           )) x
     from ppo_orders o join w ppo_voldates on w.ord_id = o.id
     where w.kind = '1127'
     and w.executor = 12937663
     and o.done_doc_date is null
     and upper(o.no) not like '%test%'
     and upper(o.no) not like '%тест%'
     and o.id = o_id
     group by o.no
      ) loop
        ref_mail.send('В заказе ppo_orders.no проставили дату аннулирования ppo_orders.cancel_date', change.x,
        'gbelenko@mggt.ru, ovoronova@mggt.ru');
       end loop;
  end test_1;
