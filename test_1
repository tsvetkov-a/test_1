  function validate_email(email_list varchar2) return varchar2 is
    vl varchar2(32000);
    el varchar2(32000) := replace(email_list, ' ');
    email_regexp varchar2(500) := chk_regexp; --'[_]{0,1}([A-Z|a-z|0-9](\.|_|-){0,1})+\@([A-Z|a-z|0-9])+(([\.|_|-]){0,1}[A-Z|a-z|0-9])*\.[A-Z|a-z]{2,6}'
    etest_regexp varchar2(20) := '[^ ,;:]+';
  begin
    select substr(clobagg(','||ve), 2) into vl from (select distinct ve from (
      select regexp_substr(el, email_regexp, 1, level) ve, regexp_substr(el, etest_regexp, 1, level) vt
      from dual
      connect by level <= regexp_count(el, email_regexp)
    ) where ve = vt);
    return vl;
  end;
  

выполняет проверку списка электронных адресов и возвращает строку, содержащую только допустимые адреса, отфильтрованные на основе регулярного выражения.
